# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–∞ –≤ StickyCart

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

–•—É–∫ `useCurrentRoute` –Ω–µ —Å—Ä–∞–∑—É —É–ª–∞–≤–ª–∏–≤–∞–ª –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø—É—Ç–∏ –ø—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ - —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Å–ª–µ–¥—É—é—â–µ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞.

## üîç –ü—Ä–∏—á–∏–Ω–∞

`usePathname()` –∏–∑ Expo Router –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É –≤ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏, –æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∏ –±—ã—Å—Ç—Ä—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö –º–µ–∂–¥—É —ç–∫—Ä–∞–Ω–∞–º–∏.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ

- **`useFocusEffect`** - –æ–±–Ω–æ–≤–ª—è–µ—Ç –ø—É—Ç—å –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–æ–∫—É—Å–∞ —ç–∫—Ä–∞–Ω–∞
- **`useSegments`** - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –º–∞—Ä—à—Ä—É—Ç–∞
- **–õ–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ** - `currentPath` –¥–ª—è –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω–æ–≥–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

### 2. –£–ª—É—á—à–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤

```typescript
// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –º–∞—Ä—à—Ä—É—Ç–∞
const matchesRoute = (path: string, screen: string): boolean => {
  if (path === screen) return true;
  if (screen.endsWith('/') && path.startsWith(screen)) return true;
  if (screen.includes('[') && screen.includes(']')) {
    // –î–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ —Ç–∏–ø–∞ /coffee-shops/[id]
    const pattern = screen.replace(/\[.*?\]/g, '');
    return path.startsWith(pattern);
  }
  return false;
};
```

### 3. –î–≤–æ–π–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤

```typescript
const isHidden = HIDDEN_SCREENS.some(
  (screen) =>
    matchesRoute(effectivePath, screen) ||
    matchesRoute(routeFromSegments, screen)
);
```

### 4. –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

```typescript
console.log('Route analysis:', {
  currentPath,
  routeFromSegments,
  effectivePath,
  segments,
  isHidden,
  isCompact,
  shouldShowStickyCart: !isHidden,
});
```

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

- ‚ùå StickyCart –Ω–µ —Å—Ä–∞–∑—É —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–ª –Ω–∞ —Å–º–µ–Ω—É —ç–∫—Ä–∞–Ω–∞
- ‚ùå –ó–∞–¥–µ—Ä–∂–∫–∞ –≤ 1-2 —Å–µ–∫—É–Ω–¥—ã –ø—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- ‚ùå –ù–µ—Ç–æ—á–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

- ‚úÖ –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ —Å–º–µ–Ω—É —ç–∫—Ä–∞–Ω–∞
- ‚úÖ –ù–∞–¥–µ–∂–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –º–∞—Ä—à—Ä—É—Ç–æ–≤
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ (`/coffee-shops/[id]`)
- ‚úÖ –î–≤–æ–π–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ `pathname` –∏ `segments`

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ö—É–∫–∏ Expo Router

- `usePathname()` - –æ—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—É—Ç–∏
- `useFocusEffect()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ —ç–∫—Ä–∞–Ω–∞
- `useSegments()` - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ–≥–º–µ–Ω—Ç–æ–≤

### –õ–æ–≥–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

1. **–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ `pathname`** - –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è `currentPath`
2. **–ü—Ä–∏ —Ñ–æ–∫—É—Å–µ —ç–∫—Ä–∞–Ω–∞** - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ `useFocusEffect`
3. **–ü—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–µ** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ `useMemo` —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

### –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤

- ‚úÖ –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã: `/orders`, `/profile`
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã: `/coffee-shops/[id]`
- ‚úÖ –í–ª–æ–∂–µ–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã: `/(tabs)/cart`
- ‚úÖ –ú–∞—Ä—à—Ä—É—Ç—ã —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏: `/menu?category=coffee`

## üì± –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

1. **–ë—ã—Å—Ç—Ä–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è** - –ø–µ—Ä–µ—Ö–æ–¥ –º–µ–∂–¥—É —ç–∫—Ä–∞–Ω–∞–º–∏ –±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫
2. **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã** - `/coffee-shops/123` ‚Üí –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ä–µ–∂–∏–º
3. **–°–∫—Ä—ã—Ç—ã–µ —ç–∫—Ä–∞–Ω—ã** - `/cart` ‚Üí StickyCart —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è
4. **–û–±—Ä–∞—Ç–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è** - `router.back()` —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

- StickyCart –ø–æ—è–≤–ª—è–µ—Ç—Å—è/–∏—Å—á–µ–∑–∞–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
- –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ä–µ–∂–∏–º –Ω–∞ —ç–∫—Ä–∞–Ω–∞—Ö —Å –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏
- –ü–æ–ª–Ω–æ–µ —Å–∫—Ä—ã—Ç–∏–µ –Ω–∞ —Å–ª—É–∂–µ–±–Ω—ã—Ö —ç–∫—Ä–∞–Ω–∞—Ö
- –ü–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–æ–±–ª–µ–º–∞ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞. StickyCart —Ç–µ–ø–µ—Ä—å —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏—é –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≤—Å–µ —Ç–∏–ø—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.
