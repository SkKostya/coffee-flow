# Экран повторения заказа

## Описание

Экран для повторения избранного заказа с возможностью настройки количества товаров и дополнительных опций.

## Файлы

### `app/repeat-order.tsx`

Единственная реализация экрана, объединяющая всю логику повторения заказа.

**Особенности:**

- Заголовок с названием кофейни
- Список товаров с использованием компонента `RepeatOrderCard`
- Интерактивные элементы для изменения количества и кастомизации
- Итоговая сумма и кнопки "Отмена" и "Подтвердить заказ"
- Полная логика управления состоянием заказа

## Навигация

Экран доступен по маршруту `/repeat-order` и вызывается из экрана избранного при нажатии на кнопку "Повторить" в карточке заказа.

## Структура данных

### RepeatOrder

```typescript
interface RepeatOrder {
  id: string;
  items: RepeatOrderItem[];
  coffeeShopId: string;
  coffeeShopName: string;
  totalAmount: number;
  originalOrderId: string;
}
```

### RepeatOrderItem

```typescript
interface RepeatOrderItem {
  id: string;
  name: string;
  basePrice: number;
  image: string;
  size: string;
  quantity: number;
  customizations: OrderCustomization[];
  totalPrice: number;
}
```

### OrderCustomization

```typescript
interface OrderCustomization {
  id: string;
  name: string;
  type: 'add' | 'remove';
  price: number;
  isSelected: boolean;
}
```

## Функциональность

### Основные возможности:

1. **Просмотр деталей заказа** - отображение всех товаров с их характеристиками
2. **Настройка количества** - изменение количества каждого товара
3. **Кастомизация** - добавление/удаление дополнительных опций
4. **Расчет стоимости** - автоматический пересчет итоговой суммы
5. **Подтверждение заказа** - переход к корзине или экрану оплаты
6. **Удаление из избранного** - возможность удалить заказ из избранного

### Интерактивные элементы:

- Кнопки "+" и "-" для изменения количества
- Переключатели кастомизаций (добавить/удалить опции)
- Кнопка "Повторить заказ" для подтверждения
- Кнопка "Назад" для возврата
- Кнопка "Удалить" для удаления из избранного

## Интеграция с темой

Экран использует цветовую систему Coffee Flow:

- Основной фон: `Colors.background`
- Текст: `Colors.neutral[50]`
- Вторичный текст: `Colors.neutral[300]`
- Основной цвет: `Colors.primary[500]`
- Успех: `Colors.success[500]` (для добавленных опций)
- Ошибка: `Colors.error[500]` (для удаленных опций)

## Примеры использования

### Навигация к экрану:

```typescript
import { router } from 'expo-router';

const handleRepeatOrder = (order: Order) => {
  router.push('/repeat-order');
};
```

### Обработка подтверждения заказа:

```typescript
const handleConfirmOrder = (order: RepeatOrder) => {
  // Логика подтверждения заказа
  router.push('/cart');
};
```

### Обработка отмены:

```typescript
const handleCancel = () => {
  router.back();
};
```

## Технические детали

- **React Native Elements**: Использование компонентов RNE для UI
- **TypeScript**: Строгая типизация всех данных и функций
- **Expo Router**: Навигация между экранами
- **Модульная архитектура**: Использование компонентов из модуля `@favorites/`
- **Адаптивность**: Поддержка мобильных устройств и планшетов

## Связанные компоненты

- `RepeatOrderCard` - карточка товара в повторном заказе (из `@favorites/`)
- `OrderCard` - карточка заказа в списке избранного
- `useRepeatOrder` - хук для управления состоянием повторного заказа
