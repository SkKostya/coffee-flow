---
description: Создание новых папок, файлов, модулей и прочего
alwaysApply: false
---

# Coffee Flow Architecture Rules

## Архитектура проекта Coffee Flow

### Основные принципы

- Проект использует модульную архитектуру с четким разделением ответственности
- Каждый модуль (auth, shared) имеет свою внутреннюю структуру
- Глобальные компоненты и утилиты размещаются в `src/shared`
- Специфичные для модуля компоненты размещаются внутри модуля

### Структура проекта

```
src/
├── auth/                    # Модуль аутентификации
│   ├── components/         # UI компоненты модуля
│   ├── hooks/             # Хуки модуля
│   ├── validation/        # Валидация модуля
│   └── index.ts           # Публичный API модуля
├── shared/                 # Глобальные компоненты и утилиты
│   ├── components/        # Переиспользуемые UI компоненты
│   ├── hooks/             # Глобальные хуки
│   ├── contexts/          # React контексты
│   └── constants/         # Глобальные константы
└── types/                  # TypeScript типы
    ├── index.ts           # Главный экспорт типов
    ├── auth.ts            # Типы аутентификации
    └── colors.ts          # Типы цветов
```

### Правила организации модулей

#### 1. Модульная структура

- Каждый модуль должен иметь четко определенную ответственность
- Модули должны быть независимыми и слабо связанными
- Внутри модуля используйте стандартную структуру папок

#### 2. Стандартная структура модуля

```
module-name/
├── components/             # UI компоненты модуля
├── hooks/                 # Хуки модуля
├── validation/            # Валидация (если применимо)
├── services/              # API сервисы (если применимо)
├── utils/                 # Утилиты модуля (если применимо)
└── index.ts               # Публичный API модуля
```

#### 3. Публичный API модуля

- Каждый модуль должен экспортировать только необходимые компоненты через `index.ts`
- Не экспортируйте внутренние детали реализации
- Экспортируйте типы, если они нужны другим модулям

```typescript
// ✅ ПРАВИЛЬНО - экспорт только публичного API
export { default as Button } from './Button';
export { default as InputField } from './InputField';
export type { AuthFormData } from '../validation/validationSchema';

// ❌ НЕПРАВИЛЬНО - экспорт внутренних деталей
export { default as InternalHelper } from './utils/InternalHelper';
```

### Правила для shared модуля

#### 1. Глобальные компоненты

- Размещайте в `src/shared/components` только компоненты, которые используются в нескольких модулях
- Компоненты должны быть максимально переиспользуемыми
- Используйте пропсы для настройки поведения

#### 2. Глобальные хуки

- Размещайте в `src/shared/hooks` хуки, которые используются в нескольких модулях
- Хуки должны быть независимыми от конкретного модуля
- Экспортируйте все хуки через `src/shared/hooks/index.ts`

#### 3. Константы и контексты

- Размещайте в `src/shared/constants` глобальные константы (цвета, размеры, API endpoints)
- Размещайте в `src/shared/contexts` React контексты для глобального состояния

### Правила именования

#### 1. Файлы и папки

- Используйте camelCase для файлов компонентов и хуков
- Используйте kebab-case для папок
- Используйте PascalCase для имен компонентов

```typescript
// ✅ ПРАВИЛЬНО
components / Button.tsx;
hooks / useAuth.ts;
validation / validationSchema.ts;

// ❌ НЕПРАВИЛЬНО
components / button.tsx;
hooks / UseAuth.ts;
validation / validation - schema.ts;
```

#### 2. Экспорты

- Используйте именованные экспорты для утилит и типов
- Используйте default экспорты для компонентов и хуков
- Группируйте связанные экспорты в одном файле

```typescript
// ✅ ПРАВИЛЬНО
export { default as Button } from './Button';
export { default as InputField } from './InputField';
export type { AuthFormData, AuthState } from './types';

// ❌ НЕПРАВИЛЬНО
export Button from './Button';
export * from './Button';
```

### Правила импортов

#### 1. Относительные пути

- Используйте относительные пути для импортов внутри модуля
- Используйте абсолютные пути для импортов из shared модуля
- Избегайте глубокой вложенности импортов

```typescript
// ✅ ПРАВИЛЬНО - импорт внутри модуля
import { Button } from './components/Button';
import { useAuth } from './hooks/useAuth';

// ✅ ПРАВИЛЬНО - импорт из shared
import { useColors } from '../../shared/hooks/useColors';
import Colors from '../../shared/constants/Colors';

// ❌ НЕПРАВИЛЬНО - слишком глубокие импорты
import { Button } from '../../../components/Button';
```

#### 2. Импорт типов

- Импортируйте типы из центрального `src/types/index.ts`
- Группируйте связанные типы в одном файле
- Используйте barrel exports для упрощения импортов

```typescript
// ✅ ПРАВИЛЬНО
import type { AuthFormData, AuthState } from '../../types';

// ❌ НЕПРАВИЛЬНО
import type { AuthFormData } from '../validation/validationSchema';
import type { AuthState } from '../hooks/useAuth';
```

### Правила создания новых файлов

#### 1. Когда создавать в модуле

- Компоненты, специфичные для функциональности модуля
- Хуки, которые работают только с данными модуля
- Валидация, специфичная для модуля
- Утилиты, используемые только внутри модуля

#### 2. Когда создавать в shared

- Компоненты, которые используются в нескольких модулях
- Хуки, которые работают с глобальным состоянием
- Константы, используемые во всем приложении
- Контексты для глобального состояния

#### 3. Примеры

```typescript
// ✅ В модуле auth - специфичный компонент
src / auth / components / PhoneInput.tsx;

// ✅ В shared - переиспользуемый компонент
src / shared / components / Button.tsx;

// ✅ В shared - глобальный хук
src / shared / hooks / useColors.ts;

// ✅ В shared - глобальные константы
src / shared / constants / Colors.ts;
```

### Правила рефакторинга

#### 1. Перемещение компонентов

- Если компонент используется в нескольких модулях, переместите его в shared
- Если компонент специфичен для модуля, оставьте его в модуле
- Обновите все импорты после перемещения

#### 2. Обновление экспортов

- После изменения структуры обновите все index.ts файлы
- Проверьте, что все импорты работают корректно
- Убедитесь, что публичный API модуля остается стабильным

### Запрещено

- ❌ Создавать файлы вне модульной структуры
- ❌ Экспортировать внутренние детали реализации
- ❌ Использовать абсолютные пути для импортов внутри модуля
- ❌ Создавать циклические зависимости между модулями
- ❌ Размещать специфичные компоненты в shared модуле

### Рекомендуется

- ✅ Следовать стандартной структуре модуля
- ✅ Использовать barrel exports для упрощения импортов
- ✅ Группировать связанные типы в одном файле
- ✅ Документировать публичный API модуля
- ✅ Регулярно рефакторить код для улучшения структуры
